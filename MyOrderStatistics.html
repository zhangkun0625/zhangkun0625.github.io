<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>数据输入与可视化 - 累计订单和销售</title>
    <style>
      body {
        font-family: Arial, sans-serif;
      }
      canvas {
        border: 1px solid black;
      }
      table,
      th,
      td {
        border: 1px solid black;
        border-collapse: collapse;
      }
      th,
      td {
        padding: 5px;
        text-align: left;
      }
    </style>
  </head>
  <body>
    <h2>输入数据生成表格和曲线图</h2>
    <form id="dataForm">
      日期: <input type="date" id="date" /><br />
      15寸订单量: <input type="number" id="product15OrderQty" /> 销售数:
      <input type="number" id="product15SalesQty" /><br />
      18寸订单量: <input type="number" id="product18OrderQty" /> 销售数:
      <input type="number" id="product18SalesQty" /><br />
      4x10订单量: <input type="number" id="product4x10OrderQty" /> 销售数:
      <input type="number" id="product4x10SalesQty" /><br />
      <button type="button" onclick="addData()">添加数据</button>
    </form>

    <h3>数据表格</h3>
    <table id="dataTable">
      <thead>
        <tr>
          <th>日期</th>
          <th>15寸订单量</th>
          <th>15寸销售数</th>
          <th>18寸订单量</th>
          <th>18寸销售数</th>
          <th>4x10订单量</th>
          <th>4x10销售数</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <h3>曲线图</h3>
    <canvas id="myChart" width="800" height="400"></canvas>

    <script>
      let cumulativeOrders = { '15寸': 0, '18寸': 0, '4x10': 0 };
      let cumulativeSales = { '15寸': 0, '18寸': 0, '4x10': 0 };

      function addData() {
        const date = document.getElementById('date').value;
        const orders = {
          '15寸':
            parseInt(document.getElementById('product15OrderQty').value) *
            parseInt(document.getElementById('product15SalesQty').value),
          '18寸':
            parseInt(document.getElementById('product18OrderQty').value) *
            parseInt(document.getElementById('product18SalesQty').value),
          '4x10':
            parseInt(document.getElementById('product4x10OrderQty').value) *
            parseInt(document.getElementById('product4x10SalesQty').value),
        };

        // Update cumulative totals
        for (let product in orders) {
          cumulativeOrders[product] += orders[product];
          cumulativeSales[product] += parseInt(
            document.getElementById(`${product}SalesQty`).value
          );
        }

        // Add to table
        renderTable(date, orders);

        // Add to chart (assuming Chart.js is included and configured)
        renderChart();
        document.getElementById('dataForm').reset();
      }

      function renderTable(date, orders) {
        const tableBody = document
          .getElementById('dataTable')
          .getElementsByTagName('tbody')[0];
        const newRow = tableBody.insertRow();
        newRow.insertCell().textContent = date;
        for (let product in orders) {
          const orderCell = newRow.insertCell();
          orderCell.textContent = orders[product];

          const salesCell = newRow.insertCell();
          salesCell.textContent = parseInt(
            document.getElementById(`${product}SalesQty`).value
          );
        }
      }

      function renderChart() {
        // Chart.js code to update chart would go here
      }

      window.onload = renderChart; // Initialize the chart
    </script>
  </body>
</html>
